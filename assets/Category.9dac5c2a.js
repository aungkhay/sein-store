import{ak as L,x as i,z as E,o as m,c as g,a as e,w as a,al as $,u as M,a3 as s,_ as P,a0 as R,b as _,a4 as C,a5 as G,a1 as H}from"./index.f11f53e3.js";import{g as J,V as K,a as j,q as O,o as Q,c as T,b as W,d,e as X,f as A,h as Y,s as Z,i as N,j as h}from"./VTextField.10d38a90.js";import{V as ee,a as ae}from"./VAppBarTitle.ad87cfff.js";import{V,a as le,c as y,e as b,d as x,b as te}from"./VRow.790622f5.js";import"./elevation.b1abc2a4.js";const se={class:"py-2"},ne={key:0,class:"d-flex justify-center"},oe={key:0},ue={class:"d-flex justify-end"},ie={class:"d-flex justify-end mt-5"},pe={__name:"Category",setup(de){const v=J(L("firebase")),f=i(!1),p=i(!1),u=i(0),w=i([]),k=i(!1),n=i(!1),r=i(""),c=i("");function D(){n.value||(f.value=!1,r.value="",c.value="",u.value=0)}async function S(){k.value=!0;const o=O(T(v,"categories"),Q("name"));W(o,t=>{w.value=t.docs.map(l=>({id:l.id,name:l.data().name,nickname:l.data().nickname})),k.value=!1})}async function U(){if(r.value==""||c.value=="")return;n.value=!0;const o={name:r.value,nickname:c.value,createdAt:new Date().getTime(),updatedAt:new Date().getTime()};u.value==0?await Y(T(v,"categories"),o):(delete o.createdAt,await Z(N(v,"categories",u.value),o)),n.value=!1,D()}function q(o){u.value=o.id,r.value=o.name,c.value=o.nickname,f.value=!0}function B(){n.value||(u.value=0,p.value=!1)}async function F(){n.value=!0,await h(N(v,"categories",u.value)),n.value=!1,B()}return E(()=>{S()}),(o,t)=>(m(),g("div",se,[e(ee,{color:"primary"},{default:a(()=>[e(ae,null,{default:a(()=>[e(d,{icon:"mdi-arrow-left",onClick:t[0]||(t[0]=l=>M(G).go(-1))}),s(" \u1021\u1019\u103B\u102D\u102F\u1038\u1021\u1005\u102C\u1038 ")]),_:1}),e(X),e(d,{icon:"mdi-plus",onClick:t[1]||(t[1]=l=>f.value=!0)})]),_:1}),k.value?(m(),g("div",ne,[e(K,{color:"primary",class:"mt-3",height:"10",rounded:"",indeterminate:""})])):$("",!0),e(V,{elevation:"0",class:"pa-2"},{default:a(()=>[e(le,null,{default:a(()=>[(m(!0),g(P,null,R(w.value,(l,z)=>(m(),H(te,{key:z,cols:"12",sm:"6",md:"3"},{default:a(()=>[e(V,null,{default:a(()=>[e(y,null,{default:a(()=>[s(C(l.name)+" ",1),l.nickname?(m(),g("span",oe,"/ "+C(l.nickname),1)):$("",!0)]),_:2},1024),e(b,{class:"d-flex justify-end"},{default:a(()=>[e(d,{color:"success",class:"mr-2",onClick:I=>q(l)},{default:a(()=>[e(x,null,{default:a(()=>[s("mdi-pencil")]),_:1}),s(" \u1015\u103C\u1004\u103A\u1019\u100A\u103A")]),_:2},1032,["onClick"]),e(d,{color:"error",onClick:I=>{p.value=!0,u.value=l.id}},{default:a(()=>[e(x,null,{default:a(()=>[s("mdi-trash-can")]),_:1}),s(" \u1016\u103B\u1000\u103A\u1019\u100A\u103A")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),e(j,{modelValue:f.value,"onUpdate:modelValue":t[6]||(t[6]=l=>f.value=l),width:"400",persistent:"",transition:"dialog-bottom-transition"},{default:a(()=>[e(V,null,{default:a(()=>[e(y,{class:"d-flex justify-space-between align-center"},{default:a(()=>[_("div",null,C(u.value==0?"\u1021\u101E\u1005\u103A\u1011\u100A\u103A\u1037\u101B\u1014\u103A":"\u1015\u103C\u1004\u103A\u101B\u1014\u103A"),1),e(d,{icon:"mdi-close",color:"error",variant:"text",onClick:t[2]||(t[2]=l=>D())})]),_:1}),e(b,null,{default:a(()=>[e(A,{modelValue:r.value,"onUpdate:modelValue":t[3]||(t[3]=l=>r.value=l),label:"\u1021\u1019\u100A\u103A\u101B\u102D\u102F\u1000\u103A\u1011\u100A\u103A\u1037\u1015\u102B","hide-details":""},null,8,["modelValue"]),e(A,{modelValue:c.value,"onUpdate:modelValue":t[4]||(t[4]=l=>c.value=l),label:"\u1021\u1001\u103C\u102C\u1038\u1021\u1019\u100A\u103A\u101B\u102D\u102F\u1000\u103A\u1011\u100A\u103A\u1037\u1015\u102B","hide-details":"",class:"mt-5"},null,8,["modelValue"]),_("div",ue,[e(d,{color:"primary",class:"mt-5",onClick:t[5]||(t[5]=l=>U()),size:"x-large",loading:n.value,disabled:n.value},{default:a(()=>[e(x,null,{default:a(()=>[s("mdi-content-save")]),_:1}),s(" \u101E\u102D\u1019\u103A\u1038\u1019\u100A\u103A")]),_:1},8,["loading","disabled"])])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(j,{modelValue:p.value,"onUpdate:modelValue":t[9]||(t[9]=l=>p.value=l),width:"400",persistent:"",transition:"dialog-bottom-transition"},{default:a(()=>[e(V,null,{default:a(()=>[e(y,null,{default:a(()=>[s("\u1015\u103C\u101A\u103A\u1016\u103B\u1000\u103A\u1019\u100A\u103A")]),_:1}),e(b,null,{default:a(()=>[s(" \u1016\u103B\u1000\u103A\u101B\u1014\u103A \u101E\u1031\u1001\u103B\u102C\u1015\u102B\u101E\u101C\u102C\u1038? "),_("div",ie,[e(d,{onClick:t[7]||(t[7]=l=>B()),class:"mr-3",color:"error"},{default:a(()=>[s("\u1019\u1016\u103B\u1000\u103A\u1010\u1031\u102C\u1037\u1015\u102B")]),_:1}),e(d,{onClick:t[8]||(t[8]=l=>F()),color:"success",loading:n.value,disabled:n.value},{default:a(()=>[s("\u1016\u103B\u1000\u103A\u1019\u100A\u103A")]),_:1},8,["loading","disabled"])])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};export{pe as default};
